{% extends "layout.html" %}
{% block content %}
<script type="text/javascript">
$(document).ready(function () {

  $('#loading').hide();

  $.getJSON('/Route/GetRouteList', function (result) {
    var optionsValues = '<select id="routes">';
    $.each(result, function (item) {
      optionsValues += '<option value="' + result[item].value + '">' +
			result[item].name + '</option>';
    });

    optionsValues += '</select>';
    $('#routes').replaceWith(optionsValues);
  });

  $('#speed1, #speed2, #speed4').change(function () {
    if ($(this).is(':checked')) {
      var speed = $(this).val();
      changeSpeed(speed);
    }
  });

  $('#selectRoute').click(function (event) {
    $('#routeChooser').fadeOut(500);
    $('#loading').fadeIn(500);
    var route = $('#routes').val();
    addStartingEndingStates(route);
    getInstructions(route);
  });

});
</script>

<div class="overlay">
	<div id="loading" class="centered">
		<p>Loading</p>
		<img src="/public/assets/ajax-loader.gif" id="loadgif" class="loadgif" alt="Loading">
	</div>
	<div id="routeChooser" class="centered">
		<p>Robot Car Parking System Simulation</p>
		<div id="selector" class="selector">
			<select id="routes"></select>
			<button class="btn" id="selectRoute">Choose route</button>
		</div>
	</div>
</div>

<div id="simulation" class="simulation">
	<div id="previews" class="previews">
		<div id="startingPoint" class="verticalPreview">
			<p>State at simulation start</p>
		</div>
		<div id="endingPoint" class="verticalPreview">
			<p>State at simulation end</p>
		</div>
    <div id="speedChooser">
      <p>Please choose the speed before starting simulation!</p>
      <input type="radio" id="speed1" name="speed" value="1" checked>1x speed<br>
      <input type="radio" id="speed2" name="speed" value="2">2x speed<br>
      <input type="radio" id="speed4" name="speed" value="4">4x speed
    </div>
		<div id="controls" class="verticalPreview,controls">
			<button class="btn" id="startSim">Start automatic simulation</button>
			<button class="btn" id="nextStep">Step-by-step simulation</button>
		</div>
		<div id="instructions" class="instructions">
			<p id="instr" class="instr"> </p>
		</div>
		<div id="FPS">
			<p id ="FPSno"> </p>
		</div>
	</div>
	<div class="verticalCanvas">
		<canvas id="simCanvas" ></canvas>
	</div>
</div>


<script type="text/javascript" src="./public/simulation.js"></script>
{% endblock %}
