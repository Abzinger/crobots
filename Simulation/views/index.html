{% extends "layout.html" %}
{% block content %}
<script type="text/javascript">
$( document ).ready( function() {

	$( "#loading").hide();
	
	$.getJSON("/Route/GetRouteList", function(result) {
			var optionsValues = '<select id="routes">';
			$.each(result, function(item) {
				optionsValues += '<option value="' + result[item].value + '">' + result[item].name + '</option>';
			});
			optionsValues += '</select>';
			var options = $('#routes');
			options.replaceWith(optionsValues);
		});
		
	$( "#selectRoute" ).click(function( event ){
		$( "#routeChooser").fadeOut(500);
		$("#loading").fadeIn(500);
		var route = $('#routes').val();
		addStartingEndingStates(route);
		getInstructions(route);
	});
	
});


</script>

<div class="overlay">
	<div id="loading" class="centered">
		<p>Loading</p>
		<img src="/public/assets/ajax-loader.gif" id="loadgif">
	</div>
	<div id="routeChooser" class="centered">
		<p>Robot Car Parking System Simulation</p>
		<div id="selector">
			<select id="routes"></select>
			<button class="btn" id="selectRoute">Choose route</button>
		</div>
	</div>
</div>

<div id="simulation">
	<div id="previews">
		<div id="startingPoint"></div>
		<div id="endingPoint"></div>
	</div>
	<div class="clearfix"></div>	
	<canvas id="simCanvas" >
	</canvas>
	<div id="instructions">
		<p id="instr"> </p>
	</div>
	<div id="controls">
		<button class="btn" id="startSim">Start automatic simulation</button>
		<button class="btn" id="nextStep">Step-by-step simulation</button>
	</div>
</div>
	

<script type="text/javascript" src="./public/simulation.js"></script>
{% endblock %}
